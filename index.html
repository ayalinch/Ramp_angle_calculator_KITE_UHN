<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ramp Angle Sandbox</title>

<!-- ✅ Three.js (Global build — works everywhere including GitHub Pages + Safari) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r150/three.min.js"></script>

<!-- ✅ OrbitControls (must match r150 + non-module version) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r150/examples/js/controls/OrbitControls.js"></script>

<style>
  body {
    margin: 0;
    background: #111827;
    font-family: system-ui, sans-serif;
    color: white;
  }
  #ui {
    position: fixed;
    top: 1rem;
    left: 1rem;
    background: #1f2937;
    padding: 1rem;
    border-radius: 12px;
    width: 260px;
    font-size: 14px;
  }
  input[type=range] { width: 100%; }
</style>
</head>

<body>

<div id="ui">
  <b>Ramp Angle Sandbox</b><br><br>
  Incline: <span id="incVal">20°</span><br>
  <input type="range" id="inc" min="0" max="40" step="1" value="20">
</div>

<canvas id="c"></canvas>

<script>
/* ---- Scene Setup ---- */
const canvas = document.getElementById("c");
const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);

const scene = new THREE.Scene();
scene.background = new THREE.Color("#111827");

const camera = new THREE.PerspectiveCamera(55, window.innerWidth/window.innerHeight, 0.1, 100);
camera.position.set(4, 3, 6);

/* ---- Controls ---- */
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

/* ---- Light ---- */
const light = new THREE.DirectionalLight(0xffffff, 1.4);
light.position.set(3,5,4);
scene.add(light);
scene.add(new THREE.AmbientLight(0xffffff, 0.25));

/* ---- Ramp ---- */
const rampGeo = new THREE.BoxGeometry(3.5, 0.08, 1.2);
const rampMat = new THREE.MeshStandardMaterial({ color: "#8b1d3a" });
const ramp = new THREE.Mesh(rampGeo, rampMat);
ramp.position.y = 0.5;
scene.add(ramp);

/* ---- Simple Person Capsule ---- */
const pGeo = new THREE.CapsuleGeometry(0.2, 0.8, 4, 16);
const pMat = new THREE.MeshStandardMaterial({ color: "#facc15" });
const person = new THREE.Mesh(pGeo, pMat);
person.position.set(0, 1, 0);
scene.add(person);

/* ---- Floor ---- */
const floorGeo = new THREE.PlaneGeometry(30, 30);
const floorMat = new THREE.MeshStandardMaterial({ color: "#1f2937", side: THREE.DoubleSide });
const floor = new THREE.Mesh(floorGeo, floorMat);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

/* ---- Ramp Angle Control ---- */
const incSlider = document.getElementById("inc");
const incVal = document.getElementById("incVal");

incSlider.oninput = ()=> {
  const deg = Number(incSlider.value);
  incVal.textContent = deg + "°";
  ramp.rotation.z = THREE.MathUtils.degToRad(deg);
};

incSlider.oninput();

/* ---- Animation (capsule steps side-to-side) ---- */
let t = 0;
function animate(){
  requestAnimationFrame(animate);
  controls.update();
  t += 0.03;
  person.position.z = Math.sin(t) * 0.4;
  renderer.render(scene, camera);
}
animate();

/* ---- Resize ---- */
window.onresize = ()=> {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
};
</script>

</body>
</html>
