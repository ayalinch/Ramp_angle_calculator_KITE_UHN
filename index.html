<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ramp Angle Sandbox — KITE UHN</title>
<style>
  html,body { margin:0; height:100%; background:#f7f9fc; font-family: -apple-system, system-ui, sans-serif; }
  canvas { display:block; }

  .panel {
    position:fixed; top:14px; left:14px; padding:14px 16px;
    background:rgba(255,255,255,0.85); backdrop-filter: blur(12px);
    border-radius:14px; border:1px solid #d8dee9; box-shadow:0 8px 30px rgba(0,0,0,.12);
    max-width:350px;
  }

  .panel h1 { font-size:16px; margin:0 0 8px; font-weight:700; color:#1a1a1a; }

  .row { display:flex; align-items:center; margin:7px 0; }
  .row label { width:100px; font-size:13px; color:#222; }
  .row input[type="range"] { flex:1; }
  .val { width:50px; text-align:right; font-size:13px; color:#444; }

  .btn {
    margin-top:6px; padding:6px 10px; font-size:12px; border-radius:8px;
    border:1px solid #ccc; background:#fff; cursor:pointer; font-weight:600; color:#333;
  }
  .btn:hover { background:#f0f0f0; }
</style>
</head>
<body>

<div class="panel">
  <h1>Ramp Angle Sandbox</h1>

  <div class="row">
    <label>Incline</label><input id="incline" type="range" min="0" max="45" step="0.1" value="12">
    <div class="val" id="inclVal">12°</div>
  </div>

  <div class="row">
    <label>Azimuth</label><input id="azimuth" type="range" min="0" max="360" step="0.1" value="45">
    <div class="val" id="aziVal">45°</div>
  </div>

  <div class="row">
    <label>Ramp Size</label><input id="size" type="range" min="1" max="6" step="0.1" value="3.5">
    <div class="val" id="sizeVal">3.5m</div>
  </div>

  <div class="row">
    <label>Walk Speed</label><input id="speed" type="range" min="0.3" max="3" step="0.1" value="1.2">
    <div class="val" id="speedVal">1.2×</div>
  </div>

  <button class="btn" id="resetBtn">Reset</button>
  <button class="btn" id="pauseBtn">Pause</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/OrbitControls.js"></script>

<script>
/* SCENE */
const scene = new THREE.Scene();
scene.background = new THREE.Color("#f7f9fc");

const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setPixelRatio(devicePixelRatio);
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

const camera = new THREE.PerspectiveCamera(55, innerWidth/innerHeight, 0.1, 100);
camera.position.set(6,4,6);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

/* LIGHTING — Bright Lab */
scene.add(new THREE.HemisphereLight(0xffffff, 0xdedede, 1.0));
const dir = new THREE.DirectionalLight(0xffffff, 1.0);
dir.position.set(4,8,4);
scene.add(dir);

/* FLOOR */
const floor = new THREE.Mesh(
  new THREE.PlaneGeometry(50,50),
  new THREE.MeshStandardMaterial({ color:"#ffffff" })
);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

/* RAMP */
let ramp;
function buildRamp(size=3.5){
  if(ramp) scene.remove(ramp);
  const geo = new THREE.BoxGeometry(size,0.06,size*1.2);
  const mat = new THREE.MeshStandardMaterial({ color:"#c7d7ea" });
  ramp = new THREE.Mesh(geo,mat);
  ramp.position.y = 0.5;
  scene.add(ramp);
}
buildRamp();

/* PERSON — simple stylized walker */
const person = new THREE.Mesh(
  new THREE.CapsuleGeometry(0.12,0.6,6,12),
  new THREE.MeshStandardMaterial({ color:"#e89c3c" })
);
person.position.set(0,1,0);
scene.add(person);

/* UI STATE */
let t = 0, dirSign = 1, paused = false;

function update(){
  const inc = +incline.value;
  const azi = +azimuth.value;
  const sizeVal = +size.value;
  const sp = +speed.value;
  inclVal.textContent = inc+"°";
  aziVal.textContent = azi+"°";
  sizeVal.textContent = sizeVal.toFixed(1)+"m";
  speedVal.textContent = sp.toFixed(1)+"×";

  buildRamp(sizeVal);
  ramp.rotation.set(
    -THREE.MathUtils.degToRad(inc),
    THREE.MathUtils.degToRad(azi),
    0
  );

  if(!paused){
    t += 0.02 * sp * dirSign;
    if(Math.abs(t) > (sizeVal*0.6)) dirSign *= -1;
  }
  const z = t;
  const pos = new THREE.Vector3(0,0.53,z);
  ramp.localToWorld(pos);
  person.position.copy(pos);

  requestAnimationFrame(update);
  controls.update();
  renderer.render(scene,camera);
}
update();

resetBtn.onclick = ()=>{
  incline.value=12;
  azimuth.value=45;
  size.value=3.5;
  speed.value=1.2;
};
pauseBtn.onclick = ()=> paused=!paused;
onresize = ()=>{ camera.aspect=innerWidth/innerHeight; camera.updateProjectionMatrix(); renderer.setSize(innerWidth, innerHeight); };

</script>
</body>
</html>
